input FindOrCreateOneThreadInput {
    application_id: String!
    title: String!
    website_url: String!
}

input FetchThreadCommentsById {
    skip: Int!
    limit: Int!
}

query FindOneOrCreateOneThread(
    $findOrCreateOneThreadInput: FindOrCreateOneThreadInput!
    $FetchThreadCommentsById: FetchThreadCommentsById!
) {
    find_one_thread_or_create_one(
        findOrCreateOneThreadInput: $findOrCreateOneThreadInput
    ) {
        id
        application_id
        title
        website_url
        thread_comments(FetchThreadCommentsById: $FetchThreadCommentsById) {
            comments_count
            comments {
                ...CommentFragment
                replies {
                    ...CommentFragment
                }
            }
        }
    }
}

fragment CommentFragment on CommentModel {
    application_id
    author {
        username
        email
        id
    }
    body
    id
    thread_id
    created_at
    updated_at
    user_id

    ratings {
        id
    }
}

input FetchCommentByThreadIdInput {
    limit: Int!
    skip: Int!
    thread_id: String!
}

query FetchCommentByThreadId(
    $fetchCommentByThreadIdInput: FetchCommentByThreadIdInput!
) {
    fetch_comments_by_thread_id(
        fetchCommentByThreadIdInput: $fetchCommentByThreadIdInput
    ) {
        comments_count
        comments {
            ...CommentFragment
            replies {
                ...CommentFragment
            }
        }
    }
}

input CreateCommentInput {
    body: String!
    application_id: String!
    thread_id: String!
}

mutation CreateThreadComent($createCommentInput: CreateCommentInput!) {
    create_comment(CreateCommentInput: $createCommentInput) {
        ...CommentFragment
        replies {
            ...CommentFragment
        }
    }
}

mutation DeleteThreadComment($commentId: String!) {
    delete_comment(commentId: $commentId) {
        success
        message
    }
}

query CurrentUser {
    current_user {
        id
        email
    }
}
