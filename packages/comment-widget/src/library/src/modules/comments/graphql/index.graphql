input FindOrCreateOneThreadInput {
    application_id: String!
    title: String!
    website_url: String!
}

input FetchThreadCommentsById {
    skip: Int!
    limit: Int!
}

query FindOneOrCreateOneThread(
    $findOrCreateOneThreadInput: FindOrCreateOneThreadInput!
) {
    find_one_thread_or_create_one(
        findOrCreateOneThreadInput: $findOrCreateOneThreadInput
    ) {
        id
        application_id
        title
        website_url
    }
}

query FineOneApplicationById($id: String!) {
    find_one_application_by_id(id: $id) {
        id
        application_name
        moderators {
            username
            id
        }
    }
}

fragment CommentFragment on CommentModel {
    application_id
    author {
        username
        id
    }
    body
    id
    thread_id
    created_at
    updated_at
    user_id
    parent_id
    _count {
        down_vote
        replies
        up_vote
    }
    replied_to_user {
        username
    }
}

enum SORT {
    ASC
    DESC
    TOP_VOTES
}

input FetchCommentByThreadIdInput {
    limit: Int!
    skip: Int!
    thread_id: String!
    sort: SORT!
}

query FetchCommentByThreadId(
    $fetchCommentByThreadIdInput: FetchCommentByThreadIdInput!
) {
    fetch_comments_by_thread_id(
        fetchCommentByThreadIdInput: $fetchCommentByThreadIdInput
    ) {
        comments_count
        comments {
            ...CommentFragment
            replies {
                ...CommentFragment
                parent_id
                replies {
                    ...CommentFragment
                }
            }
        }
    }
}

input CreateCommentInput {
    body: String!
    application_id: String!
    thread_id: String!
}

mutation CreateThreadComent($createCommentInput: CreateCommentInput!) {
    create_comment(CreateCommentInput: $createCommentInput) {
        ...CommentFragment
        replies {
            ...CommentFragment
            replies {
                ...CommentFragment
            }
        }
    }
}

mutation DeleteThreadComment($commentId: String!) {
    delete_comment(commentId: $commentId) {
        success
        message
    }
}

query CurrentUser {
    current_user {
        id
        username
    }
}

input CreateReplyCommentInput {
    body: String!
    application_id: String!
    thread_id: String!
    parent_id: String!
    replied_to_id: String!
}

mutation CreateReplyComment(
    $CreateReplyCommentInput: CreateReplyCommentInput!
) {
    create_reply_comment(CreateReplyCommentInput: $CreateReplyCommentInput) {
        ...CommentFragment
        replies {
            ...CommentFragment
            replies {
                ...CommentFragment
            }
        }
    }
}

input UpdateCommentInput {
    body: String!
    comment_id: String!
}

mutation EditThreadComment($UpdateCommentInput: UpdateCommentInput!) {
    update_comment(UpdateCommentInput: $UpdateCommentInput) {
        ...CommentFragment
        replies {
            ...CommentFragment
            replies {
                ...CommentFragment
            }
        }
    }
}

mutation UpVoteComment($comment_id: String!) {
    up_vote_comment(comment_id: $comment_id) {
        ...CommentFragment
        replies {
            ...CommentFragment
            replies {
                ...CommentFragment
            }
        }
    }
}

mutation DownVoteComment($comment_id: String!) {
    down_vote_comment(comment_id: $comment_id) {
        ...CommentFragment
        replies {
            ...CommentFragment
            replies {
                ...CommentFragment
            }
        }
    }
}
